{% extends "base.html" %}

{% block styles %}
  {% include "styling/table.html" %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/coordinator.css') }}">
{% endblock %}

{% block content %}
  {% include "components/topnav.html" %}

  <h2>
    Coordinator
  </h2>

  {% if restructure_success %}
    <div class="notification" id="restructure-notif">
      <a onclick="hideNotification()" style="cursor: pointer; margin-right: 4pt;">
        <span class="material-icons" style="font-size: 10pt;">close</span>
      </a>
      Grade restructure successful!
    </div>
  {% endif %}

  <!-- Tabs -->
  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s3"><a class="active" href="#modules_lecturers_view_tab">Lecturer Assignment</a></li>
        <li class="tab col s3"><a href="#grade_structure_view_tab">Grade Structure</a></li>
      </ul>
    </div>

    <!-- Modules/Lecturers view -->
    <div id="modules_lecturers_view_tab" class="col s12">
      <div id="modules_lecturers_view" class="card">
        <h3 class="card_title">Lecturer Assignment</h3>

        {{ tables.modules_lecturers|safe }}

        <script>
          $(document).ready(function () {
            $('#modules_lecturers-table').DataTable();
          });
        </script>

        <a href="/coordinator/assign_lecturer" class="a_button">Assign Lecturer</a>
      </div>
    </div>

    <!-- Other view -->
    <div id="grade_structure_view_tab" class="col s12">
      <div id="grade_structure_view" class="card">
        <h3 class="card_title">Grade Structure</h3>

        {{ tables.grade_structure|safe }}

        <script>
          $(document).ready(function () {
            $('#grade_structure-table').DataTable();
          });
        </script>
      </div>
    </div>
  </div>

  <script>
    function hideNotification() {
      const notif = document.getElementById('restructure-notif')
      notif.style.display = 'none';
    }
  </script>
  <script>
    $(document).ready(function(){
      $('.tabs').tabs();
    });
  </script>
{% endblock %}